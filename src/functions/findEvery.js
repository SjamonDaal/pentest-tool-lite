const find = (object, test) => {
  if (Object.prototype.toString.call(object) === '[object Array]') {
    return traverseArray(object, test);
  } else if (typeof object === 'object' && object !== null) {
    return traverseObject(object, test);
  }

  if (test(object)) {
    return object;
  }

  return null;
}

const traverseArray = (array, test) => {
  let values = [];

  array.forEach((value) => {
    if (typeof value === 'object') {
      values = values.concat(find(value, test));
    } else if (test(value)) {
      values = values.concat(value);
    }
  });

  return values;
};

const traverseObject = (object, test) => {
  let values = [];

  for (let key in object) {
    if (typeof object[key] === 'object') {
      values = values.concat(find(object[key], test));
    }

    if (Object.prototype.toString.call(object) === '[object Array]') {
      values = values.concat(find(object[key], test));
    }
  }

  return values;
};

export default function(object, test) {
  return find(object, test);
};
